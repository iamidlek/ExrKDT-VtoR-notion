(this["webpackJsonpmy-notion"]=this["webpackJsonpmy-notion"]||[]).push([[0],{14:function(e,t,n){e.exports={title:"WorkspaceListItem_title__3RwjG",actions:"WorkspaceListItem_actions__fNzZ1",active:"WorkspaceListItem_active__7H0DN",text:"WorkspaceListItem_text__1BVIb","material-icons":"WorkspaceListItem_material-icons__oubTi","no-children":"WorkspaceListItem_no-children__2v5De"}},16:function(e,t,n){e.exports={header:"LeftNavBar_header__2ofS-","user-profile":"LeftNavBar_user-profile__yhvrI",actions:"LeftNavBar_actions__EEoFP",action:"LeftNavBar_action__2TW3k","material-icons":"LeftNavBar_material-icons__2cue4","resize-handle":"LeftNavBar_resize-handle__5THgj"}},18:function(e,t,n){e.exports={inner:"Workspace_inner__BkEs2",poster:"Workspace_poster__2SnRH","delete-poster":"Workspace_delete-poster__2YMi4",title:"Workspace_title__2l-lH",content:"Workspace_content__Q9HmK"}},23:function(e,t,n){e.exports={titles:"PathHeader_titles__4jvmJ",division:"PathHeader_division__1FjsT",title:"PathHeader_title__2wdXY",actions:"PathHeader_actions__NZQPK"}},29:function(e,t,n){e.exports={app__inner:"App_app__inner__9B2UE",app__page:"App_app__page__2wvuv",page__container:"App_page__container__2Ie6S"}},83:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(26),i=n.n(r),s=n(29),o=n.n(s),p=n(9),l=n(1);function d(){return Object(l.jsx)("section",{style:{textAlign:"center",padding:"100px 0 200px"},children:Object(l.jsx)("h1",{style:{fontSize:"60px",fontWeight:"700"},children:"404 Page Not Found!"})})}var u=n(28),j=n(16),h=n.n(j),b=n(3),f=n(14),O=n.n(f),_=n(20),v=n(8),x=n.n(v),m=n(17),k=n(45),w=n.n(k),y="REQ_START",g="REQ_START_WS",N="REQ_FAIL",L="REQ_FAIL_WS",E="READ_WS_LIST",T="READ_WS",I="UPDATE_WS",W="MAKE_PATH",R=n(15),S=(n(46),n(48)),H=(n(47),n(12)),P=n(5),A={loading:!1,error:null,workspace:{id:"",poster:"",title:"",content:""}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(P.a)(Object(P.a)({},e),{},{loading:!0});case T:var n=t.payload,a=n.id,c=n.poster,r=n.title,i=n.content;return Object(P.a)(Object(P.a)({},e),{},{loading:!1,workspace:{id:a,poster:c,title:r,content:i}});case I:return Object(P.a)(Object(P.a)({},e),{},{loading:!1,workspace:t.payload});case L:return Object(P.a)(Object(P.a)({},e),{},{loading:!1,error:t.payload});default:return e}},C={loading:!1,error:null,workspaceList:[]},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(P.a)(Object(P.a)({},e),{},{loading:!1,workspaceList:t.payload});case"HARD_PUSH":return Object(P.a)(Object(P.a)({},e),{},{loading:!1,workspaceList:[].concat(Object(_.a)(e.workspaceList),[t.newWorkspace])});case y:return Object(P.a)(Object(P.a)({},e),{},{loading:!0});case N:return Object(P.a)(Object(P.a)({},e),{},{loading:!1,error:t.payload});default:return e}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Object(_.a)(t.payload);default:return e}},M=n(43),K=n(27),Q=Object(H.a)(),U=[S.a,Object(M.a)(Q)];var z=function(e){return Object(R.combineReducers)({workspace:B,workspaceTree:D,path:F,router:Object(K.b)(e)})},J=Object(R.createStore)(z(Q),R.applyMiddleware.apply(void 0,U)),Y=function(){return function(){var e=Object(m.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:y}),e.prev=1,e.next=4,q({method:"GET"});case 4:n=e.sent,t({type:E,payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:N,payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},G=function(e){return function(){var t=Object(m.a)(x.a.mark((function t(n){var a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:g}),t.prev=1,t.next=4,q({method:"GET",workspaceId:e});case 4:a=t.sent,n({type:T,payload:a}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:L,payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},V=function(e){return function(){var t=Object(m.a)(x.a.mark((function t(n){var a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q({method:"POST",data:{title:"",parentId:e}});case 3:a=t.sent,n(e?Y():{type:"HARD_PUSH",newWorkspace:a}),n(G(a.id)),Q.push("/workspace/".concat(a.id)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:N,payload:t.t0});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},Z=function(e){return function(){var t=Object(m.a)(x.a.mark((function t(n){var a,c,r,i,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.id,c=e.title,r=e.content,i=e.poster,t.next=4,q({method:"PUT",workspaceId:a,data:{title:c,content:r,poster:i}});case 4:s=t.sent,n({type:I,payload:s}),n(Y()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:L,payload:t.t0});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},X=function(e){return function(t,n){function a(n,c){n.id!==e?n.children&&n.children.forEach((function(e){return a(e,[].concat(Object(_.a)(c),[n]))})):t({type:W,payload:[].concat(Object(_.a)(c),[n])})}n().workspaceTree.workspaceList.forEach((function(e){return a(e,[])}))}};function q(e){return $.apply(this,arguments)}function $(){return($=Object(m.a)(x.a.mark((function e(t){var n,a,c,r,i,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.workspaceId,a=void 0===n?"":n,c=t.method,r=t.data,e.next=3,w()({url:"https://asia-northeast3-heropy-api.cloudfunctions.net/api/notion/workspaces/".concat(a),method:c,headers:{"content-type":"application/json",apikey:"FcKdtJs202110",username:"YooHyungChul"},data:r});case 3:return i=e.sent,s=i.data,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=function e(t){var n=t.item,c=t.depth,r=void 0===c?1:c,i=Object(b.d)(),s=Object(a.useState)(!1),o=Object(u.a)(s,2),d=o[0],j=o[1],h=n.children&&n.children.length,f=Object(b.e)((function(e){return e.router.location.pathname})).replace("/workspace/",""),_=Object(p.e)();return Object(l.jsx)("div",{children:Object(l.jsxs)("li",{children:[Object(l.jsxs)("div",{style:{paddingLeft:"".concat(14*r,"px")},className:"".concat(O.a.title," ").concat(f===n.id&&O.a.active),onClick:function(){i(G(n.id)),_.push("/workspace/".concat(n.id))},children:[Object(l.jsx)("span",{className:"material-icons ".concat(d&&O.a.active," ").concat(O.a["material-icons"]),onClick:function(e){e.stopPropagation(),j((function(e){return!e}))},children:"play_arrow"}),Object(l.jsx)("span",{className:O.a.text,children:n.title||"\uc81c\ubaa9 \uc5c6\uc74c"}),Object(l.jsxs)("div",{className:O.a.actions,children:[Object(l.jsx)("span",{className:"material-icons ".concat(O.a["material-icons"]),onClick:function(e){e.stopPropagation(),i(V(n.id)),j(!0)},children:"add"}),Object(l.jsx)("span",{className:"material-icons ".concat(O.a["material-icons"]),onClick:function(e){var t;e.stopPropagation(),i((t={id:n.id,currId:f},function(){var e=Object(m.a)(x.a.mark((function e(n,a){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q({method:"DELETE",workspaceId:t.id});case 2:n(Y()),t.id===t.currId&&(c=a().workspaceTree.workspaceList[0].id,Q.push("/workspace/".concat(c)),n(G(c)));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))},children:"delete"})]})]}),!h&&d&&Object(l.jsx)("div",{style:{paddingLeft:"".concat(14*r+22,"px")},className:O.a["no-children"],children:"\ud558\uc704 \ud398\uc774\uc9c0\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}),Object(l.jsx)("ul",{children:h&&d&&n.children.map((function(t){return Object(l.jsx)(e,{item:t,depth:r+1},t.id)}))})]})})};function te(){var e=Object(b.e)((function(e){return e.workspaceTree.workspaceList})),t=Object(a.useState)(240),n=Object(u.a)(t,2),c=n[0],r=(n[1],Object(b.d)());return Object(l.jsxs)("nav",{style:{width:"".concat(c,"px")},children:[Object(l.jsxs)("div",{className:h.a.header,children:[Object(l.jsx)("div",{className:h.a["user-profile"]}),"Yhole's Notion"]}),Object(l.jsx)("ul",{children:e.map((function(e){return Object(l.jsx)(ee,{item:e},e.id)}))}),Object(l.jsx)("div",{className:h.a.actions,children:Object(l.jsxs)("div",{className:h.a.action,onClick:function(){r(V())},children:[Object(l.jsx)("span",{className:"material-icons ".concat(h.a["material-icons"]),children:"add"}),"\uc0c8\ub85c\uc6b4 \ud398\uc774\uc9c0"]})}),Object(l.jsx)("div",{className:h.a["resize-handle"],text:"\ub108\ube44 \uc790\ub3d9 \uc870\uc808 \ub77c\uc774\ube0c\ub7ec\ub9ac \uc0ac\uc6a9\ud560\uac83"})]})}var ne=n(23),ae=n.n(ne);function ce(){var e=Object(p.e)(),t=Object(b.d)(),n=Object(b.e)((function(e){return e.path}));return Object(l.jsxs)("header",{children:[Object(l.jsx)("div",{className:ae.a.titles,children:n.map((function(n,a){var r=n.id,i=n.title;return Object(l.jsxs)(c.a.Fragment,{children:[a?Object(l.jsx)("div",{className:ae.a.division,children:"/"}):"",Object(l.jsx)("button",{className:ae.a.title,onClick:function(){return function(n){t(G(n)),e.push("/workspace/".concat(n))}(r)},children:i||"\uc81c\ubaa9 \uc5c6\uc74c"})]},r)}))}),Object(l.jsxs)("div",{className:ae.a.actions,children:[Object(l.jsx)("button",{children:"\uacf5\uc720"}),Object(l.jsx)("button",{children:"\uc5c5\ub370\uc774\ud2b8"}),Object(l.jsx)("button",{children:"\uc990\uaca8\ucc3e\uae30"}),Object(l.jsx)("button",{children:"\uae30\ud0c0"})]})]})}var re=n(51),ie=n(18),se=n.n(ie);function oe(){var e=Object(b.e)((function(e){return e.workspace.workspace})),t=e.id,n=e.title,c=e.poster,r=e.content,i=Object(b.d)(),s=Object(a.useRef)(),o=Object(a.useRef)(),p=Object(a.useRef)(),d=function(){var e=s.current.innerHTML,n=o.current.innerHTML;i(Z({id:t,title:e,content:n}))};return Object(l.jsx)("section",{children:Object(l.jsxs)("div",{className:se.a.inner,children:[Object(l.jsxs)("div",{className:se.a.poster,onClick:function(){p.current.dispatchEvent(new MouseEvent("click"))},children:[c&&Object(l.jsx)("img",{src:c,alt:"poster"}),Object(l.jsx)("input",{ref:p,type:"file",onChange:function(e){var n,a=e.target.files,c=Object(re.a)(a);try{for(c.s();!(n=c.n()).done;){var r=n.value,s=new FileReader;s.readAsDataURL(r),s.addEventListener("load",(function(e){var n=e.target.result;i(Z({id:t,poster:n}))}))}}catch(o){c.e(o)}finally{c.f()}}}),c&&Object(l.jsx)("div",{className:se.a["delete-poster"],onClick:function(e){e.stopPropagation(),i(Z({id:t,poster:"-1"}))},children:Object(l.jsx)("span",{className:"material-icons ".concat(se.a["material-icons"]),children:"close"})})]}),Object(l.jsx)("div",{ref:s,className:se.a.title,placeholder:"\uc81c\ubaa9 \uc5c6\uc74c",contentEditable:!0,suppressContentEditableWarning:!0,dangerouslySetInnerHTML:{__html:n},onBlur:d}),Object(l.jsx)("div",{ref:o,className:se.a.content,placeholder:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694!",contentEditable:!0,suppressContentEditableWarning:!0,dangerouslySetInnerHTML:{__html:r},onBlur:d})]})},t)}var pe=function(){var e=Object(b.d)(),t=Object(p.e)(),n=Object(b.e)((function(e){return e.workspaceTree})),c=Object(b.e)((function(e){return e.router}));return Object(a.useEffect)((function(){e(Y())}),[]),Object(a.useEffect)((function(){"/ExrKDT-VtoR-notion/"===t.location.pathname&&n.workspaceList.length&&(e(G(n.workspaceList[0].id)),t.push("/workspace/".concat(n.workspaceList[0].id)))}),[n]),Object(a.useEffect)((function(){e(X(c.location.pathname.replace("/workspace/","")))}),[c]),Object(l.jsxs)("div",{className:o.a.app__inner,children:[Object(l.jsx)(te,{}),Object(l.jsxs)("div",{className:o.a.app__page,children:[Object(l.jsx)(ce,{}),Object(l.jsx)("div",{className:o.a.page__container,children:Object(l.jsxs)(p.c,{children:[Object(l.jsx)(p.a,{path:"/workspace/:id",component:oe}),Object(l.jsx)(p.a,{path:"*",component:d})]})})]})]})};i.a.render(Object(l.jsx)(b.a,{store:J,children:Object(l.jsx)(K.a,{history:Q,children:Object(l.jsxs)(p.c,{children:[Object(l.jsx)(p.a,{path:"/ExrKDT-VtoR-notion/",children:Object(l.jsx)(pe,{})}),Object(l.jsx)(p.a,{path:"*",children:Object(l.jsx)(d,{})})]})})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.022d83b2.chunk.js.map