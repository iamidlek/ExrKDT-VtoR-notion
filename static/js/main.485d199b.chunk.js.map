{"version":3,"sources":["components/WorkspaceListItem.module.scss","components/LeftNavBar.module.scss","pages/Workspace.module.scss","components/PathHeader.module.scss","App.module.scss","pages/NotFound.js","redux/workspace/types.js","redux/workspace/reducer.js","redux/store.js","redux/workspace/action.js","components/WorkspaceListItem.js","components/LeftNavBar.js","components/PathHeader.js","pages/Workspace.js","App.js","index.js"],"names":["module","exports","NotFound","style","textAlign","padding","fontSize","fontWeight","REQ_START","REQ_START_WS","REQ_FAIL","REQ_FAIL_WS","READ_WS_LIST","READ_WS","UPDATE_WS","MAKE_PATH","wsInitial","loading","error","workspace","id","poster","title","content","workspaceReducer","state","action","type","payload","initial","workspaceList","workspaceListReducer","newWorkspace","pathReducer","history","createBrowserHistory","middlewares","thunk","routerMiddleware","createRootReducer","combineReducers","workspaceTree","path","router","connectRouter","store","createStore","applyMiddleware","readWorkspaceList","dispatch","a","request","method","workspaces","readWorkspace","workspaceId","createWorkspace","parentId","data","push","updateWorkspace","updatedWorkspace","headerPath","currId","getState","_find","parents","children","forEach","ws","options","axios","url","headers","apikey","username","dataToReturn","WorkspaceListItem","item","depth","useDispatch","useState","showChildren","setShowChildren","hasChildren","length","pathId","useSelector","location","pathname","replace","useHistory","paddingLeft","className","styles","onClick","e","stopPropagation","curr","map","LeftNavBar","navWidth","setNavWidth","nav","useRef","resizeHandle","useEffect","handle","interact","resizable","edges","right","on","event","rect","width","navInit","current","ref","onDoubleClick","PathHeader","index","Fragment","moveWS","Workspace","titleEl","contentEl","inputPoster","changeApply","innerHTML","dispatchEvent","MouseEvent","src","alt","onChange","files","target","file","reader","FileReader","readAsDataURL","addEventListener","poster64","result","placeholder","contentEditable","suppressContentEditableWarning","dangerouslySetInnerHTML","__html","onBlur","App","wslist","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.485d199b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"WorkspaceListItem_title__3RwjG\",\"actions\":\"WorkspaceListItem_actions__fNzZ1\",\"active\":\"WorkspaceListItem_active__7H0DN\",\"text\":\"WorkspaceListItem_text__1BVIb\",\"material-icons\":\"WorkspaceListItem_material-icons__oubTi\",\"no-children\":\"WorkspaceListItem_no-children__2v5De\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"LeftNavBar_header__2ofS-\",\"user-profile\":\"LeftNavBar_user-profile__yhvrI\",\"actions\":\"LeftNavBar_actions__EEoFP\",\"action\":\"LeftNavBar_action__2TW3k\",\"material-icons\":\"LeftNavBar_material-icons__2cue4\",\"resize-handle\":\"LeftNavBar_resize-handle__5THgj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inner\":\"Workspace_inner__BkEs2\",\"poster\":\"Workspace_poster__2SnRH\",\"delete-poster\":\"Workspace_delete-poster__2YMi4\",\"title\":\"Workspace_title__2l-lH\",\"content\":\"Workspace_content__Q9HmK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"titles\":\"PathHeader_titles__4jvmJ\",\"division\":\"PathHeader_division__1FjsT\",\"title\":\"PathHeader_title__2wdXY\",\"actions\":\"PathHeader_actions__NZQPK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app__inner\":\"App_app__inner__9B2UE\",\"app__page\":\"App_app__page__2wvuv\",\"page__container\":\"App_page__container__2Ie6S\"};","export default function NotFound() {\r\n  return (\r\n    <section style={{ textAlign: \"center\", padding: \"100px 0 200px\" }}>\r\n      <h1 style={{ fontSize: \"60px\", fontWeight: \"700\" }}>\r\n        404 Page Not Found!\r\n      </h1>\r\n    </section>\r\n  );\r\n}\r\n","export const REQ_START = \"REQ_START\";\r\nexport const REQ_START_WS = \"REQ_START_WS\";\r\nexport const REQ_FAIL = \"REQ_FAIL\";\r\nexport const REQ_FAIL_WS = \"REQ_FAIL_WS\";\r\n\r\nexport const READ_WS_LIST = \"READ_WS_LIST\";\r\nexport const READ_WS = \"READ_WS\";\r\nexport const UPDATE_WS = \"UPDATE_WS\";\r\n\r\nexport const MAKE_PATH = \"MAKE_PATH\";\r\n","import {\r\n  REQ_START,\r\n  REQ_START_WS,\r\n  MAKE_PATH,\r\n  REQ_FAIL,\r\n  REQ_FAIL_WS,\r\n  READ_WS_LIST,\r\n  READ_WS,\r\n  UPDATE_WS,\r\n} from \"./types\";\r\n\r\nconst wsInitial = {\r\n  loading: false,\r\n  error: null,\r\n  workspace: {\r\n    id: \"\",\r\n    poster: \"\",\r\n    title: \"\",\r\n    content: \"\",\r\n  },\r\n};\r\n\r\nexport const workspaceReducer = (state = wsInitial, action) => {\r\n  switch (action.type) {\r\n    case REQ_START_WS:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n      };\r\n    case READ_WS:\r\n      const { id, poster, title, content } = action.payload;\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        workspace: {\r\n          id,\r\n          poster,\r\n          title,\r\n          content,\r\n        },\r\n      };\r\n    case UPDATE_WS:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        workspace: action.payload,\r\n      };\r\n    case REQ_FAIL_WS:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst initial = {\r\n  loading: false,\r\n  error: null,\r\n  workspaceList: [],\r\n};\r\n\r\nexport const workspaceListReducer = (state = initial, action) => {\r\n  switch (action.type) {\r\n    case READ_WS_LIST:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        workspaceList: action.payload,\r\n      };\r\n    case \"HARD_PUSH\":\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        workspaceList: [...state.workspaceList, action.newWorkspace],\r\n      };\r\n    case REQ_START:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n      };\r\n    case REQ_FAIL:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const pathReducer = (state = [], action) => {\r\n  switch (action.type) {\r\n    case MAKE_PATH:\r\n      return [...action.payload];\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport thunk from \"redux-thunk\";\r\nimport logger from \"redux-logger\";\r\nimport { createBrowserHistory } from \"history\";\r\nimport { combineReducers } from \"redux\";\r\nimport {\r\n  workspaceReducer,\r\n  workspaceListReducer,\r\n  pathReducer,\r\n} from \"./workspace/reducer\";\r\nimport { connectRouter, routerMiddleware } from \"connected-react-router\";\r\n\r\nconst env = process.env.NODE_ENV;\r\n\r\n// history\r\nexport const history = createBrowserHistory();\r\n\r\nconst middlewares = [thunk, routerMiddleware(history)];\r\n\r\n// 개발 환경에서만 추가할 middleware\r\nif (env === \"development\") {\r\n  middlewares.push(logger);\r\n}\r\n\r\nconst createRootReducer = (history) =>\r\n  combineReducers({\r\n    workspace: workspaceReducer,\r\n    workspaceTree: workspaceListReducer,\r\n    path: pathReducer,\r\n    router: connectRouter(history),\r\n    // routing: routerReducer,\r\n  });\r\nlet store;\r\n\r\nif (env === \"development\") {\r\n  store = createStore(\r\n    createRootReducer(history),\r\n    composeWithDevTools(applyMiddleware(...middlewares))\r\n  );\r\n} else {\r\n  store = createStore(\r\n    createRootReducer(history),\r\n    applyMiddleware(...middlewares)\r\n  );\r\n}\r\n\r\nexport default store;\r\n","import axios from \"axios\";\r\nimport {\r\n  REQ_START,\r\n  REQ_START_WS,\r\n  MAKE_PATH,\r\n  REQ_FAIL,\r\n  READ_WS_LIST,\r\n  READ_WS,\r\n  UPDATE_WS,\r\n  REQ_FAIL_WS,\r\n} from \"./types\";\r\n\r\nimport { history } from \"../../redux/store\";\r\n\r\nexport const readWorkspaceList = () => async (dispatch) => {\r\n  dispatch({ type: REQ_START });\r\n  try {\r\n    const workspaces = await request({\r\n      method: \"GET\",\r\n    });\r\n    dispatch({ type: READ_WS_LIST, payload: workspaces });\r\n  } catch (error) {\r\n    dispatch({ type: REQ_FAIL, payload: error });\r\n  }\r\n};\r\n\r\nexport const readWorkspace = (id) => async (dispatch) => {\r\n  dispatch({ type: REQ_START_WS });\r\n  try {\r\n    const workspace = await request({\r\n      method: \"GET\",\r\n      workspaceId: id,\r\n    });\r\n    dispatch({ type: READ_WS, payload: workspace });\r\n  } catch (error) {\r\n    dispatch({ type: REQ_FAIL_WS, payload: error });\r\n  }\r\n};\r\n\r\nexport const createWorkspace = (parentId) => async (dispatch) => {\r\n  try {\r\n    const newWorkspace = await request({\r\n      method: \"POST\",\r\n      data: {\r\n        title: \"\",\r\n        parentId,\r\n      },\r\n    });\r\n    if (!parentId) {\r\n      dispatch({ type: \"HARD_PUSH\", newWorkspace });\r\n    } else {\r\n      dispatch(readWorkspaceList());\r\n    }\r\n    dispatch(readWorkspace(newWorkspace.id));\r\n    history.push(`/ExrKDT-VtoR-notion/workspace/${newWorkspace.id}`);\r\n  } catch (error) {\r\n    dispatch({ type: REQ_FAIL, payload: error });\r\n  }\r\n};\r\nexport const updateWorkspace = (payload) => async (dispatch) => {\r\n  try {\r\n    const { id, title, content, poster } = payload;\r\n    const updatedWorkspace = await request({\r\n      method: \"PUT\",\r\n      workspaceId: id,\r\n      data: {\r\n        title,\r\n        content,\r\n        poster,\r\n      },\r\n    });\r\n    dispatch({ type: UPDATE_WS, payload: updatedWorkspace });\r\n    dispatch(readWorkspaceList());\r\n  } catch (error) {\r\n    dispatch({ type: REQ_FAIL_WS, payload: error });\r\n  }\r\n};\r\nexport const deleteWorkspace = (payload) => async (dispatch, getState) => {\r\n  await request({\r\n    method: \"DELETE\",\r\n    workspaceId: payload.id,\r\n  });\r\n  dispatch(readWorkspaceList());\r\n  if (payload.id === payload.currId) {\r\n    const { id } = getState().workspaceTree.workspaceList[0];\r\n    history.push(`/ExrKDT-VtoR-notion/workspace/${id}`);\r\n    dispatch(readWorkspace(id));\r\n  }\r\n};\r\n\r\nexport const headerPath = (currId) => (dispatch, getState) => {\r\n  const workspaces = getState().workspaceTree.workspaceList;\r\n  function _find(workspace, parents) {\r\n    if (workspace.id === currId) {\r\n      dispatch({ type: MAKE_PATH, payload: [...parents, workspace] });\r\n      return;\r\n    }\r\n    if (workspace.children) {\r\n      workspace.children.forEach((ws) => _find(ws, [...parents, workspace]));\r\n    }\r\n  }\r\n  workspaces.forEach((workspace) => _find(workspace, []));\r\n};\r\n\r\nasync function request(options) {\r\n  const { workspaceId = \"\", method, data } = options;\r\n  const { data: dataToReturn } = await axios({\r\n    url: `https://asia-northeast3-heropy-api.cloudfunctions.net/api/notion/workspaces/${workspaceId}`,\r\n    method,\r\n    headers: {\r\n      \"content-type\": \"application/json\",\r\n      apikey: \"FcKdtJs202110\",\r\n      username: \"YooHyungChul\",\r\n    },\r\n    data,\r\n  });\r\n  return dataToReturn;\r\n}\r\n","import { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport styles from \"./WorkspaceListItem.module.scss\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { readWorkspace } from \"../redux/workspace/action\";\r\nimport { createWorkspace, deleteWorkspace } from \"../redux/workspace/action\";\r\n\r\nfunction WorkspaceListItem({ item, depth = 1 }) {\r\n  const dispatch = useDispatch();\r\n  const [showChildren, setShowChildren] = useState(false);\r\n  const hasChildren = item.children && item.children.length;\r\n  const handleshowChildren = (e) => {\r\n    e.stopPropagation();\r\n    setShowChildren((curr) => !curr);\r\n  };\r\n  const addChildWS = (e) => {\r\n    e.stopPropagation();\r\n    dispatch(createWorkspace(item.id));\r\n    setShowChildren(true);\r\n  };\r\n  const pathId = useSelector((state) => state.router.location.pathname).replace(\r\n    \"/ExrKDT-VtoR-notion/workspace/\",\r\n    \"\"\r\n  );\r\n  const deleteWS = (e) => {\r\n    e.stopPropagation();\r\n    dispatch(deleteWorkspace({ id: item.id, currId: pathId }));\r\n  };\r\n  let history = useHistory(); // withRouter의 재귀 컴포넌트에 적용이 어려운 점을 훅으로 대체\r\n\r\n  return (\r\n    <div>\r\n      <li>\r\n        <div\r\n          style={{ paddingLeft: `${14 * depth}px` }}\r\n          className={`${styles[\"title\"]} ${\r\n            pathId === item.id && styles[\"active\"]\r\n          }`}\r\n          onClick={() => {\r\n            dispatch(readWorkspace(item.id));\r\n            history.push(`/ExrKDT-VtoR-notion/workspace/${item.id}`);\r\n          }}\r\n        >\r\n          <span\r\n            className={`material-icons ${showChildren && styles[\"active\"]} ${\r\n              styles[\"material-icons\"]\r\n            }`}\r\n            onClick={handleshowChildren}\r\n          >\r\n            play_arrow\r\n          </span>\r\n          <span className={styles[\"text\"]}>{item.title || \"제목 없음\"}</span>\r\n          <div className={styles[\"actions\"]}>\r\n            {depth <= 4 && (\r\n              <span\r\n                className={`material-icons ${styles[\"material-icons\"]}`}\r\n                onClick={addChildWS}\r\n              >\r\n                add\r\n              </span>\r\n            )}\r\n            {\"wikkdNRxyeD0YJpxQzJ7\" !== item.id && (\r\n              <span\r\n                className={`material-icons ${styles[\"material-icons\"]}`}\r\n                onClick={deleteWS}\r\n              >\r\n                delete\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n        {!hasChildren && showChildren && (\r\n          <div\r\n            style={{ paddingLeft: `${14 * depth + 22}px` }}\r\n            className={styles[\"no-children\"]}\r\n          >\r\n            하위 페이지가 없습니다.\r\n          </div>\r\n        )}\r\n        <ul>\r\n          {hasChildren &&\r\n            showChildren &&\r\n            item.children.map((ws) => (\r\n              <WorkspaceListItem key={ws.id} item={ws} depth={depth + 1} />\r\n            ))}\r\n        </ul>\r\n      </li>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default WorkspaceListItem;\r\n","import styles from \"./LeftNavBar.module.scss\";\r\nimport { useSelector } from \"react-redux\";\r\nimport WorkspaceListItem from \"./WorkspaceListItem\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { createWorkspace } from \"../redux/workspace/action\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport interact from \"interactjs\";\r\n\r\nexport default function LeftNavBar() {\r\n  const workspaces = useSelector((state) => state.workspaceTree.workspaceList);\r\n  const [navWidth, setNavWidth] = useState(240);\r\n  const nav = useRef(null);\r\n  const resizeHandle = useRef(null);\r\n\r\n  const dispatch = useDispatch();\r\n  const addNewWS = () => {\r\n    dispatch(createWorkspace());\r\n  };\r\n\r\n  const navInit = (nav, handle) => {\r\n    interact(nav)\r\n      .resizable({\r\n        edges: {\r\n          right: handle,\r\n        },\r\n      })\r\n      .on(\"resizemove\", (event) => {\r\n        setNavWidth(event.rect.width);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    navInit(nav.current, resizeHandle.current);\r\n  });\r\n  return (\r\n    <nav style={{ width: `${navWidth}px` }} ref={nav}>\r\n      <div className={styles[\"header\"]}>\r\n        <div className={styles[\"user-profile\"]}></div>\r\n        Yhole's Notion\r\n      </div>\r\n      <ul>\r\n        {workspaces.map((item) => (\r\n          <WorkspaceListItem key={item.id} item={item} />\r\n        ))}\r\n      </ul>\r\n      <div className={styles[\"actions\"]}>\r\n        <div className={styles[\"action\"]} onClick={addNewWS}>\r\n          <span className={`material-icons ${styles[\"material-icons\"]}`}>\r\n            add\r\n          </span>\r\n          새로운 페이지\r\n        </div>\r\n      </div>\r\n      <div\r\n        ref={resizeHandle}\r\n        className={styles[\"resize-handle\"]}\r\n        onDoubleClick={() => setNavWidth(240)}\r\n      ></div>\r\n    </nav>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router\";\r\nimport { readWorkspace } from \"../redux/workspace/action\";\r\nimport styles from \"./PathHeader.module.scss\";\r\n\r\nexport default function PathHeader() {\r\n  let history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  const path = useSelector((state) => state.path);\r\n  const moveWS = (id) => {\r\n    dispatch(readWorkspace(id));\r\n    history.push(`/ExrKDT-VtoR-notion/workspace/${id}`);\r\n  };\r\n  return (\r\n    <header>\r\n      <div className={styles[\"titles\"]}>\r\n        {path.map(({ id, title }, index) => (\r\n          <React.Fragment key={id}>\r\n            {index ? <div className={styles[\"division\"]}>/</div> : \"\"}\r\n            <button className={styles[\"title\"]} onClick={() => moveWS(id)}>\r\n              {title || \"제목 없음\"}\r\n            </button>\r\n          </React.Fragment>\r\n        ))}\r\n      </div>\r\n      <div className={styles[\"actions\"]}>\r\n        <button>공유</button>\r\n        <button>업데이트</button>\r\n        <button>즐겨찾기</button>\r\n        <button>기타</button>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n","import { useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport styles from \"./Workspace.module.scss\";\r\nimport { updateWorkspace } from \"../redux/workspace/action\";\r\nimport { useDispatch } from \"react-redux\";\r\nexport default function Workspace() {\r\n  const { id, title, poster, content } = useSelector(\r\n    (state) => state.workspace.workspace\r\n  );\r\n  const dispatch = useDispatch();\r\n  const titleEl = useRef();\r\n  const contentEl = useRef();\r\n  const inputPoster = useRef();\r\n  const fileConvert = (event) => {\r\n    const { files } = event.target; //Array-like\r\n    for (const file of files) {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file); // base64\r\n      reader.addEventListener(\"load\", (e) => {\r\n        const poster64 = e.target.result;\r\n        dispatch(updateWorkspace({ id, poster: poster64 }));\r\n      });\r\n    }\r\n  };\r\n  const triggerInput = () => {\r\n    inputPoster.current.dispatchEvent(new MouseEvent(\"click\"));\r\n  };\r\n  const changeApply = () => {\r\n    const title = titleEl.current.innerHTML;\r\n    const content = contentEl.current.innerHTML;\r\n    dispatch(updateWorkspace({ id, title, content }));\r\n  };\r\n  const deletePoster = (e) => {\r\n    e.stopPropagation();\r\n    dispatch(updateWorkspace({ id, poster: \"-1\" }));\r\n  };\r\n  return (\r\n    <section key={id}>\r\n      <div className={styles[\"inner\"]}>\r\n        <div className={styles[\"poster\"]} onClick={triggerInput}>\r\n          {poster && <img src={poster} alt=\"poster\" />}\r\n          <input ref={inputPoster} type=\"file\" onChange={fileConvert} />\r\n          {poster && (\r\n            <div className={styles[\"delete-poster\"]} onClick={deletePoster}>\r\n              <span className={`material-icons ${styles[\"material-icons\"]}`}>\r\n                close\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div\r\n          ref={titleEl}\r\n          className={styles[\"title\"]}\r\n          placeholder=\"제목 없음\"\r\n          contentEditable\r\n          suppressContentEditableWarning\r\n          dangerouslySetInnerHTML={{ __html: title }}\r\n          onBlur={changeApply}\r\n        ></div>\r\n        <div\r\n          ref={contentEl}\r\n          className={styles[\"content\"]}\r\n          placeholder=\"내용을 입력하세요!\"\r\n          contentEditable\r\n          suppressContentEditableWarning\r\n          dangerouslySetInnerHTML={{ __html: content }}\r\n          onBlur={changeApply}\r\n        ></div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","import styles from \"./App.module.scss\";\nimport { Switch, Route, useHistory } from \"react-router\";\nimport NotFound from \"./pages/NotFound\";\nimport LeftNavBar from \"./components/LeftNavBar\";\nimport PathHeader from \"./components/PathHeader\";\nimport Workspace from \"./pages/Workspace\";\nimport { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  readWorkspace,\n  readWorkspaceList,\n  headerPath,\n} from \"./redux/workspace/action\";\n\nfunction App() {\n  const dispatch = useDispatch();\n  let history = useHistory();\n  const wslist = useSelector((state) => state.workspaceTree);\n  const router = useSelector((state) => state.router);\n\n  useEffect(() => {\n    dispatch(readWorkspaceList());\n  }, []);\n  useEffect(() => {\n    if (\n      history.location.pathname === \"/ExrKDT-VtoR-notion/\" &&\n      wslist.workspaceList.length\n    ) {\n      dispatch(readWorkspace(wslist.workspaceList[0].id));\n      history.push(\n        `/ExrKDT-VtoR-notion/workspace/${wslist.workspaceList[0].id}`\n      );\n    }\n  }, [wslist]);\n  useEffect(() => {\n    dispatch(\n      headerPath(\n        router.location.pathname.replace(\"/ExrKDT-VtoR-notion/workspace/\", \"\")\n      )\n    );\n  }, [router]);\n  return (\n    <div className={styles[\"app__inner\"]}>\n      <LeftNavBar />\n      <div className={styles[\"app__page\"]}>\n        <PathHeader />\n        <div className={styles[\"page__container\"]}>\n          <Switch>\n            <Route\n              path=\"/ExrKDT-VtoR-notion/workspace/:id\"\n              component={Workspace}\n            />\n            <Route path=\"*\" component={NotFound} />\n          </Switch>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport { Switch, Route } from \"react-router-dom\";\nimport { ConnectedRouter } from \"connected-react-router\";\nimport store, { history } from \"./redux/store\";\nimport NotFound from \"./pages/NotFound\";\n\nReactDOM.render(\n  // <React.StrictMode>\n  <Provider store={store}>\n    <ConnectedRouter history={history}>\n      <Switch>\n        <Route path=\"/ExrKDT-VtoR-notion/\">\n          <App />\n        </Route>\n        <Route path=\"*\">\n          <NotFound />\n        </Route>\n      </Switch>\n    </ConnectedRouter>\n  </Provider>,\n  // </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}